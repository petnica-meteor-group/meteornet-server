{% extends 'base.html' %}

{% block header %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/station_view.css' %}">
{% endblock %}

{% block content %}
{% load nbsp %}
<div class="title">Station {{ station.name }}</div>
{% if errors|length > 0 %}
<div class="subtitle">Errors</div>
<dl>
{% for error in errors %}
    <dt class="error-title">{{ error.component }} / {{ error.datetime }}</dt>
    <dd class="error-message">
        {{ error.message|linebreaks|nbsp }}
        <form method="post" action="/station_error_resolve">
            {% csrf_token %}
            <input type="hidden" name="error_id" value="{{ error.id }}" />
            <button type="submit" class="btn btn-block btn-resolve">Resolve</button>
        </form>
    </dd>
{% endfor %}
</dl>
{% endif %}
<div class="subtitle">Components</div>
{% for component in components %}
    {{ component.name }}<br/>
    values:<br/>
    {% for value in component.values %}
        {{ value.0 }} = {{ value.1 }}<br/>
    {% endfor %}
    plots:<br/>
    {% for plot in component.plots %}
        {{ plot.0 }} = {{ plot.1 }}<br/>
    {% endfor %}
{% endfor %}
<div class="subtitle">Maintainers</div>
{% for maintainer in maintainers %}
    {{ maintainer.name }}
{% endfor %}
<div class="subtitle">Graphs</div>
/

<button type="button" class="btn btn-block btn-delete" data-toggle="modal" data-target="#modal-delete">Delete</button>
<div id="modal-delete" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete Station?</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete {{ station.name }}?</p>
            </div>
            <div class="modal-footer">
                <form method="post" action="/station_delete">
                    {% csrf_token %}
                    <input type="hidden" name="network_id" value="{{ station.network_id }}" />
                    <button type="submit" class="btn btn-block btn-delete">Yes</button>
                </form>
                <button type="button" class="btn btn-default btn-no" data-dismiss="modal">No</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
